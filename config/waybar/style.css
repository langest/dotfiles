  /* Color definitions */
  @define-color bg         #111418;
  @define-color bg_alt     #1b2026;
  @define-color bg_accent  #222b34;
  @define-color accent     #1c5a8c;
  @define-color accent_alt #5fb3ff;
  @define-color warn       #e0a840;
  @define-color crit       #d94c3d;
  @define-color ok         #4caf50;
  @define-color fg         #d9dde2;
  @define-color fg_dim     #8b929b;
  @define-color fg_alt     #b5bcc4;

  * {
    color: @fg;
    border: none;
    border-radius: 0;
    min-height: 0;
    font-family: 'CaskaydiaMono Nerd Font';
    font-size: 12px;
  }

  /* Backgrounds */
  #wireplumber,
  #memory,
  #cpu,
  #temperature,
  #language,
  #battery,
  #clock,
  #tray,
  #scratchpad {
    background: @bg;
  }

  window#waybar {
    background: transparent;
    color: @fg;
  }

  window#waybar > box {
    margin: 2px;
  }

  /* Shared pill styling */
  #workspaces,
  #wireplumber,
  #memory,
  #cpu,
  #temperature,
  #language,
  #battery,
  #clock,
  #tray,
  #scratchpad {
    background: @bg;
    border-radius: 6px;
    padding: 0;
    margin: 0 4px;
  }

  #wireplumber,
  #memory,
  #cpu,
  #temperature,
  #language,
  #battery,
  #clock,
  #tray,
  #scratchpad {
    padding: 3px 9px;
  }

  /* Window title */
  #window {
    background: @bg;
    border-radius: 6px;
    padding: 3px 9px;
    margin: 0 4px;
  }

  window#waybar.empty #window {
    background: transparent;
    padding: 0;
  }
  /* Workspaces */
  #workspaces {
    padding: 0 4px;
    background: @bg;
  }

  #workspaces button {
    color: @fg_dim;
    background: transparent;
    padding: 3px 8px;
    border-radius: 4px;
    transition: background 120ms, color 120ms, opacity 120ms;
    font-weight: 500;
  }

  #workspaces button:hover {
    background: @bg_accent;
    color: @fg;
  }

  #workspaces button.focused {
    background: @accent;
    color: #0c1116;
    font-weight: 600;
  }

  #workspaces button.visible:not(.focused) {
    background: @bg_accent;
    color: @fg;
  }

  #workspaces button.urgent {
    background: @crit;
    color: #fff;
  }

  #workspaces button.persistent { opacity: 0.55; }
  #workspaces button.focused.persistent { opacity: 1; }
  #workspaces button.empty.persistent { opacity: 0.35; }

  /* Scratchpad */
  #scratchpad { color: @fg; }
  #scratchpad.empty {
    background: transparent;
    padding: 0;
    margin-right: 0;
  }

  /* Highlight only when clickable */
  #scratchpad:not(.empty):hover {
    background: @bg_accent;
  }

  /* Audio */
  #wireplumber { min-width: 70px; }
  #wireplumber.muted {
    color: @fg_dim;
    text-decoration: line-through;
  }

  #wireplumber:hover {
    background: @bg_accent;
  }

  /* Memory / CPU / Temp */
  #cpu { min-width: 110px; }

  #cpu.high {
    background: @warn;
    color: #111;
  }

  #cpu.critical,
  #temperature.critical {
    background: @crit;
    color: #fff;
    font-weight: 600;
  }

  /* Language */
  #language {
    font-weight: 600;
    letter-spacing: 0.5px;
  }

  #language:hover {
    background: @bg_accent;
  }

  /* Battery */
  #battery {
    min-width: 80px;
  }

  #battery.warning:not(.charging):not(.plugged) {
    color: @warn;
  }

  #battery.critical:not(.charging):not(.plugged) {
    color: @crit;
    font-weight: 600;
    animation: battery-pulse 1.2s ease-in-out infinite;
  }

  @keyframes battery-pulse {
    0% { box-shadow: 0 0 0 0 rgba(217,76,61,0.60); }
    70% { box-shadow: 0 0 0 10px rgba(217,76,61,0); }
    100% { box-shadow: 0 0 0 0 rgba(217,76,61,0); }
  }

  /* Clock */
  #clock {
    font-weight: 500;
    letter-spacing: 0.4px;
  }

  #clock:hover {
    background: @bg_accent;
  }

  /* Tray */
  #tray {
    padding-right: 4px;
  }

  #tray > * { padding: 0 2px; }

  /* Menu surface */
  menu,
  .menu,
  .popup,
  .window-frame.csd.popup,
  .background.popup {
    background: @bg_alt;
    color: @fg;
    border: 1px solid @bg_accent;
  }

  /* Tooltip */
  tooltip {
    background: @bg_alt;
    border: 1px solid #1f252c;
    border-radius: 6px;
    padding: 6px 9px;
  }

  tooltip label {
    color: @fg_alt;
    font-size: 11.5px;
  }

  /* Spacing fixes */
  #workspaces { margin-left: 4px; }

  box > widget:first-child > * { margin-left: 0; }
  box > widget:last-child > * { margin-right: 0; }
